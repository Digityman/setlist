:root{
  --bg:#0f0f10; --panel:#161719; --text:#e9e9ea; --muted:#a6a6ac;
  --accent:#5bd19a; --btn:#232428; --ring:#2b2d31; --warn:#ffd54a;
  --playerH: 96px;
}
html,body{height:100%}
body{margin:0; background:var(--bg); color:var(--text); font:13px/1.45 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
a{color:inherit; text-decoration:none}
.wrap{min-height:100%; display:flex; flex-direction:column}
html, body { overflow-x: hidden; }

.statusBanner{position:sticky; top:0; z-index:9999; padding:10px 12px; font-size:14px; line-height:1.2; text-align:center; background:#fff3cd; color:#664d03; border-bottom:1px solid #ffe69c;}
.statusRetryBtn{margin-left:8px; padding:4px 8px; border:1px solid #d3a500; background:#ffec99; border-radius:6px; cursor:pointer}

/* Header */
header{
  padding:8px 10px; display:flex; align-items:center; gap:10px;
  background:var(--panel); position:sticky; top:0; z-index:8;
  box-shadow:0 1px 0 #000 inset, 0 1px 0 rgba(255,255,255,.03)
}
.headLeft{display:flex; align-items:center; gap:8px; min-width:42px}
.hamburger{min-width:42px; min-height:36px; border-radius:10px; background:var(--btn); border:1px solid var(--ring); cursor:pointer; display:flex; align-items:center; justify-content:center}
.hamburger span{display:block; width:18px; height:2px; background:#ccc; position:relative}
.hamburger span::before, .hamburger span::after{content:""; position:absolute; left:0; width:18px; height:2px; background:#ccc}
.hamburger span::before{top:-6px} .hamburger span::after{top:6px}
.headCenter{flex:1; display:flex; justify-content:center; pointer-events:none}
#pageTitle{font-size:16px; font-weight:600; text-align:center; max-width:80vw; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
.crumb{opacity:.75; font-weight:400}
.headRight{min-width:42px; display:flex; justify-content:flex-end; gap:8px}
.headerActions .btn{min-height:32px; min-width:32px; padding:6px 10px; border-radius:10px}

/* SubHeader */
.subHeader{ display:none; align-items:center; justify-content:center; gap:8px; padding:6px 10px; background:var(--panel); border-top:1px solid var(--ring); }
.subHeader.show{display:flex}
#bandName{font-weight:700; color:var(--text);}
#favBandBtn{background:transparent; border:1px solid var(--ring); border-radius:999px; padding:4px 10px; cursor:pointer}
#favBandBtn.fav{color:var(--warn); border-color:#4a3b0a; background:#1c1a12}
#favShowBtn.fav{ color: var(--warn); border-color: #4a3b0a; background: #1c1a12; }

/* Buttons & inputs */
.toolbar{display:flex; gap:8px; padding:10px 12px; align-items:center; flex-wrap:wrap}
.pill{background:var(--panel); border:1px solid var(--ring); border-radius:999px; padding:8px 12px; display:flex; align-items:center; gap:8px}
select, input[type="search"]{background:transparent; color:var(--text); border:none; outline:none; font:14px system-ui; min-width:120px}
.btn{background:var(--btn); color:var(--text); border:1px solid var(--ring); border-radius:12px; padding:10px 12px; display:inline-flex; align-items:center; justify-content:center; gap:6px; min-width:40px; min-height:40px; cursor:pointer}
.btn:active{transform:translateY(1px)}
.ghost{background:transparent}
.muted{color:var(--muted)}
.chip{background:var(--panel); border:1px solid var(--ring); border-radius:999px; padding:6px 10px; font-size:11px; color:var(--muted)}
.pillBtn{background:var(--panel); border:1px solid var(--ring); border-radius:999px; padding:6px 10px; font-size:11px; cursor:pointer; color:var(--text)}
.pill-sm{ padding:4px 8px; font-size:11px; }
.is-on{ color:var(--warn)!important; border-color:#4a3b0a!important; background:#1c1a12!important }

/* Dropdowns */
.dropdown{position:relative; min-width:150px; cursor:pointer}
.dropBtn{background:transparent; border:none; color:var(--text); font:14px; width:100%; text-align:left; padding:0; pointer-events:none}
.menu{ position:absolute; top:110%; left:0; right:0; background:var(--panel); border:1px solid var(--ring); border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.45); display:none; max-height:280px; overflow:auto; z-index:50; }
.menu.open{display:block}
.menu .item{padding:9px 12px; cursor:pointer; white-space:nowrap}
.menu .item:hover{background:#202124}

/* Bands grid */
.bandsGrid{ display:grid; grid-template-columns: repeat(auto-fit, minmax(118px, 1fr)); gap:8px; padding:0 12px 120px; }
.bandsGrid.favGrid{ grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap:6px; justify-content:start; }
.bandsGrid.favGrid .bandTile{ padding:6px; }
.bandsGrid.favGrid .starBtn{ min-width:28px; min-height:28px; top:6px; right:6px; }
@media (min-width: 480px){ .bandsGrid.favGrid{ grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); } }
@media (min-width: 768px){ .bandsGrid.favGrid{ grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); } }
@media (min-width: 1200px){ .bandsGrid.favGrid{ grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); } }

.bandTile{ background:var(--panel); border:1px solid var(--ring); border-radius:12px; padding:8px; display:flex; flex-direction:column; gap:8px; cursor:pointer; position:relative; }
.bandTile img{ width:100%; aspect-ratio:1/1; object-fit:cover; border-radius:10px; background:#0c0c0d; }
.bandTitle{ font-weight:600; font-size:12px; line-height:1.25; white-space:normal; overflow:hidden; display:-webkit-box; -webkit-box-orient:vertical; -webkit-line-clamp:2; overflow-wrap:anywhere; word-break:break-word; }
.bandViews{ font-size:11px; color:var(--muted); white-space:normal; overflow:visible; text-overflow:clip; }
@media (min-width: 1200px){ .bandsGrid{ grid-template-columns: repeat(auto-fit, minmax(140px, 1fr)); } }

/* Lists & cards */
.grid{display:grid; grid-template-columns:1fr; gap:8px; padding:0 12px 120px}
.card{ background:var(--panel); border:1px solid var(--ring); border-radius:14px; padding:12px; display:flex; justify-content:space-between; align-items:center; }
.card.tap{cursor:pointer}
.card > *{ min-width:0; }
.card > :first-child{ flex:1 1 auto; }
.card > :last-child{ flex:0 0 auto; }
.card h3{ margin:0 0 6px 0; font-size:15px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis }
.row{ display:flex; gap:8px; align-items:center; flex-wrap:wrap; min-width:0; }
.small{font-size:12px; color:var(--muted)}
.favToggle{min-width:40px}
.loadMore{justify-content:center}

/* Tracks */
.tracks{display:grid; gap:6px; padding:0 12px 120px}
.track{ position:relative; background:var(--panel); border:1px solid var(--ring); border-radius:12px; padding:10px 12px; display:flex; align-items:center; justify-content:space-between; gap:10px; min-width:0; }
.tleft{ display:flex; gap:10px; align-items:center; flex:1 1 auto; min-width:0; }
.tnum{ width:18px; text-align:right; color:var(--muted); font-size:12px; flex:0 0 auto; }
.tname{ font-size:13px; flex:1 1 auto; min-width:0; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.tlen{ font-size:12px; color:var(--muted); flex:0 0 auto; }
.track.playing{ box-shadow:0 0 0 2px rgba(255,213,74,.25) inset }
.track.playing::before{ content:""; position:absolute; left:0; top:0; bottom:0; width:6px; background:var(--warn); border-radius:12px 0 0 12px }
.progressBar{ position:absolute; left:0; bottom:0; height:3px; background:var(--warn); border-radius:0 0 12px 12px; width:0%; }
.songFav{ min-width:32px; min-height:32px; border-radius:10px; border:1px solid var(--ring); background:transparent; color:var(--text); }
.songFav.is-on{ color:var(--warn); }

@keyframes pulseTrack { 0% { box-shadow:0 0 0 2px rgba(255,213,74,.45) inset } 100% { box-shadow:0 0 0 0 rgba(255,213,74,0) inset } }
.track.pulse { animation: pulseTrack .9s ease-out 2; }

/* Show meta */
.showMeta{ display:flex; flex-direction:column; gap:6px; padding:6px 12px 8px; }
.showHeadRow{ display:flex; align-items:center; gap:8px; }
.showTitle{ font-weight:600; margin-right:6px; }
.showHeadRow .end{ margin-left:auto; display:flex; align-items:center; }
.metaRow{ display:flex; }
.metaLeft{ display:flex; align-items:center; gap:8px; flex-wrap:wrap; }
.stars{ display:inline-flex; align-items:center; gap:4px; }

/* Player */
.player{ position:fixed; left:0; right:0; bottom:0; background:var(--panel); border-top:1px solid var(--ring); box-shadow:0 -1px 0 #000 inset, 0 -6px 24px rgba(0,0,0,.35); padding:10px 12px calc(10px + env(safe-area-inset-bottom)); z-index:9; }
.player .controls{ display:grid; grid-template-columns: auto auto auto auto 1fr auto; align-items:center; gap:8px; max-width:1000px; margin:0 auto; }
.player .btn{ min-width:42px; min-height:42px; border-radius:12px }
.seekWrap{ display:flex; align-items:center; gap:10px; min-width:0; flex:unset; margin-right:0; }
#P_times{ font-size:12px; color:var(--muted); white-space:nowrap }
#P_seek{ flex:1; width:100%; height:6px; border:none; outline:none; border-radius:999px; background:#2a2b2f; -webkit-appearance:none; appearance:none; }
.volWrap{ min-width:42px; position:relative }
#P_seek::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:14px; height:14px; border-radius:50%; background:#7bdcaa; border:none;}
#P_seek::-moz-range-thumb{ width:14px; height:14px; border-radius:50%; background:#7bdcaa; border:none;}
.eqBtn{ width:42px; height:42px; border-radius:12px; border:1px solid var(--ring); background:var(--btn); display:flex; align-items:center; justify-content:center; cursor:pointer }
.eqBars{ display:inline-flex; align-items:flex-end; gap:3px; width:18px; height:16px }
.eqBars span{ width:4px; background:#7bdcaa; border-radius:2px; animation:eq 1.1s infinite ease-in-out; transform-origin:bottom }
.eqBars span:nth-child(1){ animation-delay:0s }
.eqBars span:nth-child(2){ animation-delay:.15s }
.eqBars span:nth-child(3){ animation-delay:.3s }
@keyframes eq { 0%,100%{height:20%} 25%{height:80%} 50%{height:40%} 75%{height:70%} }
.eqBars.paused span{ animation-play-state:paused; opacity:.6; }
.volPop{ position:fixed; left:50%; transform:translateX(-50%); bottom:72px; background:var(--panel); border:1px solid var(--ring); border-radius:12px; padding:10px 12px; box-shadow:0 8px 24px rgba(0,0,0,.45); display:none; width:260px; max-width:90vw; z-index:40; }
.volPop.open{display:block}
.volRow{display:flex; align-items:center; gap:10px}
#P_vol{flex:1; height:6px; border:none; border-radius:999px; background:#2a2b2f; -webkit-appearance:none; appearance:none;}
#P_vol::-webkit-slider-thumb{ -webkit-appearance:none; appearance:none; width:14px; height:14px; border-radius:50%; background:#7bdcaa; border:none;}
#P_vol::-moz-range-thumb{ width:14px; height:14px; border-radius:50%; background:#7bdcaa; border:none;}

/* Drawer */
.drawerBack{position:fixed; inset:0; background:rgba(0,0,0,.5); display:none; z-index:11}
.drawerBack.open{display:block}
.drawer{ position:fixed; top:0; left:0; bottom:0; width:280px; max-width:85vw; background:var(--panel); border-right:1px solid var(--ring); box-shadow: 8px 0 24px rgba(0,0,0,.4); transform:translateX(-100%); transition:transform .25s ease; z-index:12; display:flex; flex-direction:column; }
.drawer.open{transform:translateX(0)}
.drawerHeader{display:flex; align-items:center; justify-content:space-between; gap:8px; padding:12px; border-bottom:1px solid var(--ring)}
.drawerClose{min-width:36px; min-height:32px; border-radius:8px; border:1px solid var(--ring); background:var(--btn); cursor:pointer}
.drawerBody{padding:8px 8px 12px; overflow:auto}
.menuGroup{margin:8px 0 10px}
.menuTitle{font-size:12px; color:var(--muted); margin:6px 8px}
.menuItem{display:flex; align-items:center; gap:8px; padding:10px; border-radius:10px; cursor:pointer}
.menuItem:hover{background:#202124}
.menuItem .icon{width:18px; text-align:center}
.menuItem.sub{ padding-left:28px; }

/* Favorites page styles / overflow safety */
.pageActions{display:flex; gap:8px; padding:8px 12px; align-items:center}
.card.fav .title { color: var(--text) !important; font-size: 13px; font-weight: 600; }
.card.fav .btn:not(.is-on) { color: var(--text); border-color: var(--ring); background: var(--btn); }
.card.fav a { color: var(--text); }
.wrap, #content, .tracks, .grid { overflow-x: hidden; }

/* Concert cards safe wrapping */
.card.tap > div:first-child,
.card.fav > div:first-child { min-width: 0; flex: 1 1 auto; }
.card.tap > div:first-child .row,
.card.fav > div:first-child .row { min-width: 0; flex-wrap: wrap; }
.card.tap > div:first-child .row > *,
.card.fav > div:first-child .row > * { min-width: 0; }
.card.tap > div:first-child .small,
.card.fav > div:first-child .small { min-width: 0; overflow-wrap: anywhere; word-break: break-word; }
.card.tap h3, .card.fav .title {
  margin: 0 0 6px 0; font-size: 15px; line-height: 1.25; white-space: normal;
  display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; max-height: calc(1.25em * 2);
}
.card.tap, .card.fav { align-items: flex-start; }

/* Favorite star on band tiles */
.starBtn{ position:absolute; top:8px; right:8px; min-width:32px; min-height:32px; border-radius:10px; border:1px solid var(--ring); background:var(--btn); color:var(--text); display:flex; align-items:center; justify-content:center; }
.starBtn.is-on{ color:var(--warn); border-color:#4a3b0a; background:#1c1a12; }
