<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1,viewport-fit=cover"/>
<title>Setlist Streamer</title>

<link rel="manifest" href="manifest.json?v=3">
<meta name="theme-color" content="#0f0f10">
<link rel="icon" href="icons/logo-32.png" sizes="32x32" type="image/png">
<link rel="apple-touch-icon" href="icons/logo-180.png" sizes="180x180">
<link rel="preconnect" href="https://archive.org">

<style>
:root{
  --bg:#0f0f10;--panel:#161719;--text:#e9e9ea;--muted:#a6a6ac;
  --accent:#5bd19a;--btn:#232428;--ring:#2b2d31;--warn:#ffd54a;
}
html,body{height:100%}
body{margin:0;background:var(--bg);color:var(--text);
  font:14px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
a{color:inherit;text-decoration:none}
.wrap{min-height:100%;display:flex;flex-direction:column}

/* === HEADER === */
header{
  position:sticky;top:0;z-index:6;background:var(--panel);
  display:flex;flex-direction:column;padding:6px 12px;
  box-shadow:0 1px 0 #000 inset,0 1px 0 rgba(255,255,255,.03);
}
.headerTop{
  display:flex;align-items:center;justify-content:space-between;
  position:relative;min-height:42px;
}
.headerLeft,.headerRight{display:flex;align-items:center;gap:8px;}
.headerCenter{
  position:absolute;left:50%;transform:translateX(-50%);
  font-weight:700;font-size:16px;text-align:center;
  max-width:calc(100% - 100px);
  overflow:hidden;text-overflow:ellipsis;white-space:nowrap;
}
.headerBottom{
  display:flex;justify-content:center;align-items:center;
  gap:8px;font-size:15px;font-weight:600;color:var(--warn);
  min-height:24px;
}
.bandFavBtn{background:none;border:none;cursor:pointer;color:var(--warn);font-size:16px;}
.bandFavBtn.dim{opacity:.5}

/* Hamburger */
.hamburger{
  width:40px;height:40px;border:1px solid var(--ring);border-radius:10px;
  background:var(--btn);display:flex;align-items:center;justify-content:center;cursor:pointer;
}
.hamburger span{display:block;width:18px;height:2px;background:#e9e9ea;position:relative}
.hamburger span::before,.hamburger span::after{
  content:"";position:absolute;left:0;right:0;height:2px;background:#e9e9ea;
}
.hamburger span::before{top:-6px}
.hamburger span::after{top:6px}

/* Slide Menu */
.sideMenu{
  position:fixed;top:0;bottom:0;left:0;width:260px;background:#141516;
  border-right:1px solid var(--ring);transform:translateX(-100%);
  transition:transform .25s ease;z-index:20;padding:16px 12px;
}
.sideMenu.open{transform:translateX(0)}
.menuItem{padding:10px 12px;border-radius:10px;margin:4px 0;cursor:pointer;}
.menuItem:hover{background:#1b1c1e}
.scrim{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;z-index:19;}
.scrim.open{display:block}

/* === BANDS GRID === */
.bandsGrid{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));
  gap:8px;padding:0 12px 120px;}
.bandTile{background:var(--panel);border:1px solid var(--ring);border-radius:12px;
  padding:6px;display:flex;flex-direction:column;gap:6px;cursor:pointer;}
.bandTile img{width:100%;aspect-ratio:1/1;object-fit:cover;border-radius:8px;background:#0c0c0d}
.bandTitle{font-weight:600;font-size:12px}
.bandViews{font-size:10px;color:var(--muted)}

/* Concert & Track Lists */
.grid{display:grid;gap:8px;padding:0 12px 120px;}
.card{background:var(--panel);border:1px solid var(--ring);border-radius:14px;
  padding:12px;display:flex;justify-content:space-between;align-items:center;}
.card.tap{cursor:pointer;}
.small{font-size:12px;color:var(--muted)}
.track{background:var(--panel);border:1px solid var(--ring);border-radius:12px;
  padding:10px 12px;margin-bottom:6px;position:relative;cursor:pointer;}
.track.playing{box-shadow:0 0 0 2px rgba(255,213,74,.25) inset;}
.track.playing::before{content:"";position:absolute;left:0;top:0;bottom:0;width:5px;background:var(--warn);border-radius:12px 0 0 12px;}
.progressBar{position:absolute;left:0;bottom:0;height:3px;background:var(--warn);border-radius:0 0 12px 12px;width:0%}

/* Player */
.player{
  position:fixed;bottom:0;left:0;right:0;background:var(--panel);
  border-top:1px solid var(--ring);box-shadow:0 -4px 24px rgba(0,0,0,.3);
  padding:10px;z-index:5;text-align:center;
}

/* Util */
.hidden{display:none!important}
</style>
</head>
<body>
<div class="wrap">
  <!-- Slide menu -->
  <aside id="sideMenu" class="sideMenu">
    <div class="menuItem">Home</div>
    <div class="menuItem">Favorites</div>
    <div class="menuItem">Recently Played</div>
    <div class="menuItem">Top Bands</div>
    <div class="menuItem">Random Show</div>
    <div class="menuItem">Settings</div>
  </aside>
  <div id="scrim" class="scrim"></div>

  <!-- Header -->
  <header>
    <div class="headerTop">
      <div class="headerLeft">
        <button id="menuBtn" class="hamburger"><span></span></button>
      </div>
      <div id="headerTitle" class="headerCenter">Setlist Streamer â€” Bands</div>
      <div id="headerRight" class="headerRight"></div>
    </div>
    <div id="bandLine" class="headerBottom hidden">
      <span id="bandName" class="headerBand"></span>
      <button id="favBandBtn" class="bandFavBtn dim">â˜†</button>
    </div>
  </header>

  <div id="content" class="bandsGrid">
    <div class="card"><span class="small">Loading bandsâ€¦</span></div>
  </div>
</div>

<div class="player" id="playerBar">
  ðŸŽµ Player (Play / Pause / Next / Prev)
</div>

<script>
/* Basic helpers */
const $=s=>document.querySelector(s);
function show(el,on=true){if(!el)return;el.classList.toggle('hidden',!on);}
const store={get(k,f){try{return JSON.parse(localStorage.getItem(k))??f}catch{return f}},set(k,v){localStorage.setItem(k,JSON.stringify(v))}};

/* Slide menu */
const menuBtn=$('#menuBtn'),sideMenu=$('#sideMenu'),scrim=$('#scrim');
menuBtn.onclick=()=>{sideMenu.classList.add('open');scrim.classList.add('open');};
scrim.onclick=()=>{sideMenu.classList.remove('open');scrim.classList.remove('open');};

/* Header control */
const headerTitle=$('#headerTitle');
const headerRight=$('#headerRight');
const bandLine=$('#bandLine');
const bandNameEl=$('#bandName');
const favBandBtn=$('#favBandBtn');
let currentRoute='bands';
let currentBand='';

function setHeader(route,band){
  const textMap={
    bands:'Setlist Streamer â€” Bands',
    band:'Setlist Streamer â€” Concerts',
    show:'Setlist Streamer â€” Tracks'
  };
  headerTitle.textContent=textMap[route]||'Setlist Streamer';
  headerTitle.style.maxWidth='calc(100% - 160px)'; // wider center zone
  headerRight.innerHTML='';
  if(route==='band'){
    const back=document.createElement('button');
    back.className='btn ghost';back.textContent='â† Bands';
    back.onclick=()=>{setHeader('bands');show(bandLine,false);};
    headerRight.appendChild(back);
    bandNameEl.textContent=band||'';
    show(bandLine,true);
  }else if(route==='show'){
    const back=document.createElement('button');
    back.className='btn ghost';back.textContent='â† Concerts';
    back.onclick=()=>{setHeader('band',band);};
    headerRight.appendChild(back);
    show(bandLine,false);
  }else{
    show(bandLine,false);
  }
}

/* Dummy data display */
function loadBands(){
  const content=$('#content');content.className='bandsGrid';
  const bands=['Grateful Dead','Phish','String Cheese Incident','Smashing Pumpkins','Widespread Panic'];
  content.innerHTML=bands.map(b=>
    `<div class="bandTile" data-band="${b}">
      <img src="https://archive.org/services/img/${encodeURIComponent(b)}">
      <div class="bandTitle">${b}</div>
      <div class="bandViews">12K views</div>
    </div>`).join('');
  content.onclick=e=>{
    const tile=e.target.closest('.bandTile');
    if(!tile)return;
    currentBand=tile.dataset.band;
    loadConcerts(tile.dataset.band);
  };
}
function loadConcerts(band){
  const content=$('#content');content.className='grid';
  content.innerHTML=`<div class="card"><b>${band}</b> Concert 1</div>
                     <div class="card"><b>${band}</b> Concert 2</div>`;
  setHeader('band',band);
  content.onclick=e=>{
    const card=e.target.closest('.card');if(!card)return;
    loadTracks(card.textContent);
  };
}
function loadTracks(showName){
  const content=$('#content');content.className='grid';
  content.innerHTML=`<div class="track">Track 1 - ${showName}</div>
                     <div class="track">Track 2 - ${showName}</div>`;
  setHeader('show',currentBand);
}

/* Fav toggle */
favBandBtn.onclick=()=>{const on=favBandBtn.textContent==='â˜†';
  favBandBtn.textContent=on?'â˜…':'â˜†';favBandBtn.classList.toggle('dim',!on);
  store.set('favBand',on);
};

/* Init */
loadBands();
</script>
</body>
</html>
