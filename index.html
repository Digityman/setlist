<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Setlist Stream ‚Äî Bands/Concerts/Tracks</title>
  <link rel="preconnect" href="https://archive.org" />
  <style>
    :root{
      --bg:#0e0f12;         /* app background */
      --bg-soft:#171922;    /* cards / header */
      --text:#e8ecf1;       /* primary text */
      --muted:#9aa4b2;      /* secondary text */
      --accent:#3aa6ff;     /* links, focus */
      --warn:#ffd54d;       /* yellow (stars/title) */
      --ok:#4bd37b;
      --danger:#ff5c77;
      --shadow:0 8px 24px rgba(0,0,0,.35);
      --radius:16px;
      --tap:48px; /* target size */
      --z-header:30; --z-drawer:40; --z-pop:50; --z-player:60;
      --header-h1:20px; /* title line height */
      --header-h2:18px; /* secondary line */
    }

    html,body{height:100%}
    body{margin:0;background:var(--bg);color:var(--text);font:15px/1.45 system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"}
    *{box-sizing:border-box}
    a{color:var(--accent);text-decoration:none}
    button{font:inherit}

    /* HEADER */
    .appHeader{
      position:sticky; top:0; z-index:var(--z-header);
      background:linear-gradient(180deg,rgba(23,25,34,.95),rgba(23,25,34,.85));
      backdrop-filter:saturate(140%) blur(6px);
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .appHeaderInner{
      display:flex; align-items:center; justify-content:space-between;
      padding:8px 12px; min-height:56px;
    }
    .hLeft,.hRight{display:flex; align-items:center; gap:8px; min-width:0}
    .hCenter{position:absolute; left:50%; transform:translateX(-50%); text-align:center; pointer-events:none}
    .title{margin:0; font-weight:700; font-size:var(--header-h1); letter-spacing:.2px; color:var(--warn)}
    .subtitle{margin:2px 0 0; font-size:var(--header-h2); color:var(--muted)}

    /* HAMBURGER */
    .iconBtn{display:inline-flex; align-items:center; justify-content:center; gap:8px;
      min-width:var(--tap); height:var(--tap); padding:0 12px; border-radius:12px;
      background:#1e2230; border:1px solid rgba(255,255,255,.06); color:var(--text);
      box-shadow:var(--shadow); cursor:pointer}
    .iconBtn:active{transform:translateY(1px)}
    .hamburger{width:22px; height:16px; position:relative}
    .hamburger span{position:absolute; left:0; right:0; height:2px; background:var(--text); border-radius:2px; transition:.25s}
    .hamburger span:nth-child(1){top:0}
    .hamburger span:nth-child(2){top:7px}
    .hamburger span:nth-child(3){bottom:0}

    /* RIGHT-SIDE HEADER BUTTONS */
    .pillBtn{padding:10px 12px; border-radius:12px; background:#2a3042; color:var(--text);
      border:1px solid rgba(255,255,255,.06); cursor:pointer; white-space:nowrap}
    .pillBtn[hidden]{display:none}

    /* DRAWER */
    .scrim{position:fixed; inset:0; background:rgba(0,0,0,.4); opacity:0; pointer-events:none; transition:.2s; z-index:var(--z-drawer)}
    .scrim.show{opacity:1; pointer-events:auto}

    .drawer{position:fixed; top:0; left:0; bottom:0; width:min(84vw, 320px); z-index:var(--z-drawer);
      background:var(--bg-soft); border-right:1px solid rgba(255,255,255,.08);
      transform:translateX(-105%); transition:transform .25s cubic-bezier(.3,.7,.4,1)}
    .drawer.open{transform:translateX(0)}
    .drawerHeader{display:flex; align-items:center; gap:10px; padding:14px 16px; border-bottom:1px solid rgba(255,255,255,.06)}
    .drawerHeader .logo{width:28px; height:28px; border-radius:8px; background:linear-gradient(135deg,#4e5bf7,#8a5cf6); box-shadow:var(--shadow)}
    .drawerHeader h3{margin:0; font-size:16px}
    .menu{list-style:none; margin:8px 0 0; padding:0}
    .menu li{display:block}
    .menu a{display:flex; align-items:center; gap:10px; padding:12px 16px; color:var(--text)}
    .menu a:hover{background:#222636}

    /* MAIN CONTENT PAGES */
    .page{padding:14px 12px 110px}
    .cards{display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:10px}
    @media (min-width:520px){ .cards{grid-template-columns:repeat(3, minmax(0,1fr))} }
    .card{background:#151827; border:1px solid rgba(255,255,255,.06); border-radius:var(--radius); padding:12px; box-shadow:var(--shadow)}

    /* PLAYER (fixed bottom) */
    .player{
      position:fixed; left:0; right:0; bottom:0; z-index:var(--z-player);
      background:linear-gradient(180deg,rgba(21,24,39,.98),rgba(21,24,39,1));
      border-top:1px solid rgba(255,255,255,.06); box-shadow:0 -10px 30px rgba(0,0,0,.35);
    }
    .playerInner{display:flex; align-items:center; gap:10px; padding:10px 12px}
    .btn{display:inline-flex; align-items:center; justify-content:center; min-width:40px; height:40px; border-radius:12px; background:#1f2433; color:var(--text); border:1px solid rgba(255,255,255,.06); cursor:pointer}
    .seek{flex:1}
    .seek input[type=range]{width:100%}

    /* UTIL */
    .sr{position:absolute; width:1px; height:1px; overflow:hidden; clip:rect(0,0,0,0)}
    [hidden]{display:none!important}
  </style>
</head>
<body>

  <!-- SCRIM + DRAWER -->
  <div id="scrim" class="scrim" aria-hidden="true"></div>
  <aside id="drawer" class="drawer" aria-label="Main">
    <div class="drawerHeader">
      <div class="logo" aria-hidden="true"></div>
      <h3>Setlist Stream</h3>
    </div>
    <nav>
      <ul class="menu">
        <li><a href="#" data-menu="home">üè† Home</a></li>
        <li><a href="#" data-menu="favorites">‚≠ê Favorites</a></li>
        <li><a href="#" data-menu="playlists">üéµ Playlists</a></li>
        <li><a href="#" data-menu="downloads">‚¨áÔ∏è Downloads</a></li>
        <li><a href="#" data-menu="settings">‚öôÔ∏è Settings</a></li>
        <li><a href="#" data-menu="about">‚ÑπÔ∏è About</a></li>
      </ul>
    </nav>
  </aside>

  <!-- HEADER -->
  <header class="appHeader" role="banner">
    <div class="appHeaderInner">
      <div class="hLeft">
        <button id="btnMenu" class="iconBtn" aria-label="Open menu" aria-haspopup="true" aria-expanded="false" aria-controls="drawer">
          <span class="hamburger" aria-hidden="true">
            <span></span><span></span><span></span>
          </span>
        </button>
      </div>

      <div class="hCenter">
        <h1 class="title">Setlist Stream ‚Äî Bands/Concerts/Tracks</h1>
        <!-- Optional secondary line could go here -->
      </div>

      <div class="hRight">
        <button id="btnBackBands" class="pillBtn" hidden>Back to Bands</button>
        <button id="btnBackConcerts" class="pillBtn" hidden>Back to Concerts</button>
      </div>
    </div>
  </header>

  <!-- PAGES -->
  <main id="main">
    <!-- Bands Page -->
    <section id="pageBands" class="page" aria-label="Bands">
      <h2 style="margin:6px 0 12px">Bands</h2>
      <div class="cards" id="bandsGrid"></div>
    </section>

    <!-- Concerts Page -->
    <section id="pageConcerts" class="page" aria-label="Concerts" hidden>
      <h2 style="margin:6px 0 12px">Concerts</h2>
      <div class="cards" id="concertsGrid"></div>
    </section>

    <!-- Tracks Page -->
    <section id="pageTracks" class="page" aria-label="Tracks" hidden>
      <h2 style="margin:6px 0 12px">Tracks</h2>
      <div id="tracksList"></div>
    </section>
  </main>

  <!-- PLAYER -->
  <footer class="player" role="contentinfo">
    <div class="playerInner">
      <button class="btn" id="btnPrev" title="Previous">‚èÆ</button>
      <button class="btn" id="btnPlay" title="Play/Pause">‚ñ∂Ô∏è</button>
      <button class="btn" id="btnNext" title="Next">‚è≠</button>
      <div class="seek">
        <input id="seek" type="range" min="0" max="100" value="0" />
      </div>
      <div id="times" style="min-width:72px; text-align:right; color:var(--muted)">0:00 / 0:00</div>
      <audio id="audio" preload="metadata" crossorigin="anonymous"></audio>
    </div>
  </footer>

  <script>
    /* =======================
       BASIC STATE & ROUTER
       ======================= */
    const PAGES = {
      bands: document.getElementById('pageBands'),
      concerts: document.getElementById('pageConcerts'),
      tracks: document.getElementById('pageTracks')
    };
    const btnBackBands = document.getElementById('btnBackBands');
    const btnBackConcerts = document.getElementById('btnBackConcerts');

    let ROUTE = 'bands'; // bands | concerts | tracks

    function setRoute(to){
      ROUTE = to;
      for(const [k,el] of Object.entries(PAGES)) el.hidden = (k!==to);
      // Right-side header buttons logic
      btnBackBands.hidden     = (to === 'bands');
      btnBackConcerts.hidden  = !(to === 'tracks'); // show only on Tracks
      // Title can remain static per request; if you later want dynamic, update here.
      // Center title remains centered by layout (no JS needed).
    }

    btnBackBands.addEventListener('click', ()=> setRoute('bands'));
    btnBackConcerts.addEventListener('click', ()=> setRoute('concerts'));

    /* =======================
       DRAWER OPEN/CLOSE
       ======================= */
    const drawer = document.getElementById('drawer');
    const scrim  = document.getElementById('scrim');
    const btnMenu = document.getElementById('btnMenu');

    function openDrawer(){
      drawer.classList.add('open');
      scrim.classList.add('show');
      btnMenu.setAttribute('aria-expanded','true');
    }
    function closeDrawer(){
      drawer.classList.remove('open');
      scrim.classList.remove('show');
      btnMenu.setAttribute('aria-expanded','false');
    }

    btnMenu.addEventListener('click', openDrawer);
    scrim.addEventListener('click', closeDrawer);
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeDrawer(); });

    // Menu item demo handlers
    document.querySelectorAll('.menu a').forEach(a=>{
      a.addEventListener('click', (e)=>{
        e.preventDefault();
        const id = a.getAttribute('data-menu');
        if(id==='home')      setRoute('bands');
        if(id==='favorites') alert('Favorites (placeholder)');
        if(id==='playlists') alert('Playlists (placeholder)');
        if(id==='downloads') alert('Downloads (placeholder)');
        if(id==='settings')  alert('Settings (placeholder)');
        if(id==='about')     alert('Setlist Stream\nVersion 2.6 ‚Äî Left drawer prototype');
        closeDrawer();
      });
    });

    /* =======================
       DEMO DATA + RENDERERS
       (kept minimal; plug into your v2.5 data flows as needed)
       ======================= */
    const bandsGrid = document.getElementById('bandsGrid');
    const concertsGrid = document.getElementById('concertsGrid');
    const tracksList = document.getElementById('tracksList');

    const demoBands = [
      { id:'grateful_dead', name:'Grateful Dead' },
      { id:'phish', name:'Phish' },
      { id:'smashing_pumpkins', name:'Smashing Pumpkins' },
      { id:'string_cheese_incident', name:'String Cheese Incident' },
      { id:'widespread_panic', name:'Widespread Panic' },
      { id:'tedeschi_trucks', name:'Tedeschi Trucks Band' }
    ];

    function renderBands(){
      bandsGrid.innerHTML = demoBands.map(b=>`<article class="card">
        <div style="font-weight:700">${b.name}</div>
        <div style="color:var(--muted); font-size:13px; margin:6px 0 10px">${b.id}</div>
        <button class="pillBtn" data-band="${b.id}">View Concerts</button>
      </article>`).join('');

      bandsGrid.querySelectorAll('button[data-band]').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const bandId = btn.getAttribute('data-band');
          // Load your real concerts here
          renderConcerts(bandId);
          setRoute('concerts');
        });
      });
    }

    function renderConcerts(bandId){
      // Demo: three concerts
      const demo = [1,2,3].map(i=>({ id:`${bandId}_${i}`, date:`199${i}-07-0${i}`, venue:`Demo Venue ${i}`}));
      concertsGrid.innerHTML = demo.map(c=>`<article class="card">
        <div style="font-weight:700">${c.date}</div>
        <div style="color:var(--muted); font-size:13px; margin:4px 0 10px">${c.venue}</div>
        <button class="pillBtn" data-concert="${c.id}">View Tracks</button>
      </article>`).join('');

      concertsGrid.querySelectorAll('button[data-concert]').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          const cid = btn.getAttribute('data-concert');
          renderTracks(cid);
          setRoute('tracks');
        });
      });
    }

    function renderTracks(concertId){
      const demo = [1,2,3,4,5].map(i=>({ idx:i, title:`Track ${i}`, dur: 120 + i*35 }));
      tracksList.innerHTML = demo.map(t=>`<div class="card" style="display:flex; align-items:center; justify-content:space-between; gap:10px; margin-bottom:8px">
        <div>${t.idx}. ${t.title}</div>
        <button class="btn" data-play="${t.idx}">‚ñ∂Ô∏è</button>
      </div>`).join('');

      tracksList.querySelectorAll('button[data-play]').forEach(btn=>{
        btn.addEventListener('click', ()=>{
          playDemoTrack(Number(btn.getAttribute('data-play')));
        });
      });
    }

    /* =======================
       VERY LIGHT PLAYER WIRES
       (kept generic; your v2.5 queue logic can drop in here)
       ======================= */
    const A = document.getElementById('audio');
    const btnPlay = document.getElementById('btnPlay');
    const btnPrev = document.getElementById('btnPrev');
    const btnNext = document.getElementById('btnNext');
    const seek = document.getElementById('seek');
    const times = document.getElementById('times');

    function fmt(t){ t = Math.max(0, Math.floor(t||0)); const m = Math.floor(t/60), s = (t%60).toString().padStart(2,'0'); return `${m}:${s}` }

    btnPlay.addEventListener('click', ()=>{ if(A.paused) A.play(); else A.pause(); });
    A.addEventListener('play', ()=> btnPlay.textContent = '‚è∏');
    A.addEventListener('pause',()=> btnPlay.textContent = '‚ñ∂Ô∏è');

    A.addEventListener('timeupdate', ()=>{
      if(!isNaN(A.duration)){
        seek.value = (A.currentTime / A.duration) * 100;
        times.textContent = `${fmt(A.currentTime)} / ${fmt(A.duration)}`;
      }
    });
    seek.addEventListener('input', ()=>{ if(!isNaN(A.duration)) A.currentTime = (seek.value/100) * A.duration; });

    function playDemoTrack(i){
      // Replace with archive.org URL wiring; this is a short beep for proof-of-life
      const ctx = new (window.AudioContext||window.webkitAudioContext)();
      const o = ctx.createOscillator(); const g = ctx.createGain();
      o.type='sine'; o.frequency.value = 220 + i*30; o.connect(g); g.connect(ctx.destination);
      o.start(); setTimeout(()=>{ o.stop(); ctx.close(); }, 350);
    }

    // Initialize
    renderBands();
    setRoute('bands');
  </script>
</body>
</html>
